<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UBUDASA Shop - Quality Products Delivered to Your Doorstep</title>
    <meta name="description" content="UBUDASA Shop - Your trusted online store for quality products with cash on delivery. Fast delivery across Huye.">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --primary: #E30613; --primary-dark: #C10510; --white: #FFFFFF; --black: #1C1C1C; --gray-100: #F8F9FA; --gray-200: #E9ECEF; --gray-300: #DEE2E6; --gray-600: #6C757D; --gray-800: #343A40; --success: #28A745; --warning: #e9b20e; --shadow: 0 4px 12px rgba(0, 0, 0, 0.08); --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.12); --radius: 12px; --radius-sm: 8px; --transition: all 0.3s ease; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body { font-family: 'Open Sans', sans-serif; background: var(--white); color: var(--black); line-height: 1.6; overflow-x: hidden; }
    
        header { background: var(--primary); color: var(--white); padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); position: sticky; top: 0; z-index: 1000; }
        .logo-container { display: flex; align-items: center; gap: 0.75rem; cursor: pointer; user-select: none; }
        .logo-icon { font-size: 1.5rem; }
        header h1 { font-family: 'Montserrat', sans-serif; font-size: 1.4rem; font-weight: 700; margin: 0; }
        .header-actions { display: flex; align-items: center; gap: 1rem; }
        .whatsapp-link { color: var(--white); font-size: 1.4rem; text-decoration: none; transition: var(--transition); display: flex; align-items: center; gap: 0.5rem; }
        .whatsapp-link:hover { transform: scale(1.1); }
        
        nav { display: flex; justify-content: space-around; background: var(--white); border-bottom: 1px solid var(--gray-200); position: sticky; top: 64px; z-index: 999; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05); }
        nav button { background: none; border: none; padding: 1rem 0.75rem; font-family: 'Montserrat', sans-serif; font-weight: 600; cursor: pointer; color: var(--gray-600); transition: var(--transition); position: relative; flex: 1; text-align: center; }
        nav button:hover { color: var(--primary); }
        nav button.active { color: var(--primary); }
        nav button.active::after { content: ''; position: absolute; bottom: 0; left: 20%; right: 20%; height: 3px; background: var(--primary); border-radius: 3px 3px 0 0; }
        /
        main { padding: 1.5rem; min-height: calc(100vh - 200px); }
    
        #home { text-align: center; padding: 2.5rem 1rem; max-width: 800px; margin: 0 auto; }
        .hero-icon { font-size: 3rem; color: var(--primary); margin-bottom: 1rem; }
        #home h2 { color: var(--primary); font-family: 'Montserrat', sans-serif; margin-bottom: 1rem; font-size: 1.8rem; font-weight: 700; }
        #home p { font-size: 1.1rem; margin-bottom: 1.5rem; color: var(--gray-800); }
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin: 2.5rem 0; }
        .feature { background: var(--gray-100); padding: 1.5rem; border-radius: var(--radius); box-shadow: var(--shadow); }
        .feature i { font-size: 1.8rem; color: var(--primary); margin-bottom: 0.75rem; }
        .feature h3 { font-family: 'Montserrat', sans-serif; margin-bottom: 0.5rem; font-size: 1.1rem; }
        .cta-button { background: var(--primary); color: var(--white); border: none; padding: 0.875rem 2rem; border-radius: var(--radius-sm); cursor: pointer; font-weight: 600; font-size: 1rem; transition: var(--transition); box-shadow: 0 4px 10px rgba(227, 6, 19, 0.3); }
        .cta-button:hover { background: var(--primary-dark); transform: translateY(-2px); box-shadow: 0 6px 14px rgba(227, 6, 19, 0.4); }
        
        #products, #about, #contact { display: none; margin-top: 1rem; }
        .section-title { font-family: 'Montserrat', sans-serif; font-size: 1.5rem; margin-bottom: 1.5rem; color: var(--black); text-align: center; }
    
        .search-container { max-width: 600px; margin: 0 auto 1.5rem; }
        .search-box { display: flex; align-items: center; background: var(--white); border: 2px solid var(--gray-300); border-radius: var(--radius); padding: 0.75rem 1rem; transition: var(--transition); }
        .search-box:focus-within { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(227, 6, 19, 0.1); }
        .search-box i { color: var(--gray-600); margin-right: 0.75rem; }
        .search-box input { border: none; outline: none; flex: 1; font-size: 1rem; font-family: 'Open Sans', sans-serif; }
        
        .category-filter { display: flex; gap: 0.75rem; margin-bottom: 2rem; overflow-x: auto; padding-bottom: 0.5rem; }
        .category-filter::-webkit-scrollbar { height: 6px; }
        .category-filter::-webkit-scrollbar-track { background: var(--gray-200); border-radius: 3px; }
        .category-filter::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }
        .category-btn { background: var(--white); border: 2px solid var(--gray-300); padding: 0.75rem 1.25rem; border-radius: var(--radius); cursor: pointer; font-weight: 600; transition: var(--transition); white-space: nowrap; font-family: 'Montserrat', sans-serif; }
        .category-btn:hover { border-color: var(--primary); color: var(--primary); }
        .category-btn.active { background: var(--primary); border-color: var(--primary); color: var(--white); }
        .category-btn i { margin-right: 0.5rem; }
        .products-grid { display: grid; grid-template-columns: 1fr; gap: 2rem; padding: 0 1.5rem; }
        .product { background: var(--white); border-radius: var(--radius); overflow: hidden; display: flex; flex-direction: column; box-shadow: var(--shadow); transition: var(--transition); border: 1px solid var(--gray-200); cursor: pointer; }
        .product:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
        .product-img-container { position: relative; width: 100%; height: 0; padding-bottom: 100%; overflow: hidden; background: var(--gray-200); }
        .product img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; padding: 0; transition: var(--transition); }
        .product:hover img { transform: scale(1.05); }
        .product-category { position: absolute; top: 0.5rem; right: 0.5rem; background: var(--primary); color: var(--white); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; z-index: 1; }
        .product-info { padding: 1rem; flex-grow: 1; display: flex; flex-direction: column; }
        .product h3 { margin: 0 0 0.5rem; font-family: 'Montserrat', sans-serif; font-size: 1rem; font-weight: 600; color: var(--black); }
        .product-price { margin: 0 0 1rem; font-weight: 700; color: var(--primary); font-size: 1.1rem; }
        .product button { width: 100%; background: var(--primary); color: var(--white); border: none; padding: 0.75rem; border-radius: var(--radius-sm); cursor: pointer; font-weight: 600; transition: var(--transition); margin-top: auto; }
        .product button:hover { background: var(--primary-dark); }
        .no-results { text-align: center; padding: 3rem 1rem; color: var(--gray-600); }
        .no-results i { font-size: 3rem; margin-bottom: 1rem; color: var(--gray-300); }
    
        .loading { text-align: center; padding: 3rem 1rem; color: var(--primary); }
        .loading i { font-size: 3rem; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    
        .product-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.6); display: none; align-items: center; justify-content: center; z-index: 3000; padding: 1rem; }
        .product-modal-content { width: 100%; max-width: 700px; background: var(--white); border-radius: var(--radius); max-height: 85vh; overflow: auto; box-shadow: var(--shadow-lg); position: relative; }
        .close-modal { position: absolute; top: 1rem; right: 1rem; background: var(--white); border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-size: 1.2rem; color: var(--gray-600); box-shadow: var(--shadow); z-index: 1; transition: var(--transition); }
        .close-modal:hover { background: var(--gray-200); color: var(--primary); }
        .modal-body { display: grid; grid-template-columns: 1fr; gap: 1.5rem; }
        .modal-body img { width: 100%; height: 300px; object-fit: contain; padding: 1rem; background: var(--gray-100); border-radius: var(--radius) var(--radius) 0 0; }
        .modal-info { padding: 1.5rem; }
        .modal-info h2 { font-family: 'Montserrat', sans-serif; margin-bottom: 0.75rem; color: var(--black); }
        .modal-category { display: inline-block; background: var(--primary); color: var(--white); padding: 0.35rem 0.75rem; border-radius: 6px; font-size: 0.85rem; font-weight: 600; margin-bottom: 1rem; }
        .modal-price { font-size: 1.5rem; font-weight: 700; color: var(--primary); margin-bottom: 1rem; }
        .modal-description { color: var(--gray-800); line-height: 1.8; margin-bottom: 1.5rem; }
        .modal-add-cart { width: 100%; background: var(--primary); color: var(--white); border: none; padding: 1rem; border-radius: var(--radius-sm); cursor: pointer; font-weight: 700; font-size: 1rem; transition: var(--transition); }
        .modal-add-cart:hover { background: var(--primary-dark); }
    
        .floating-buttons { position: fixed; bottom: 1.5rem; right: 1.5rem; display: flex; flex-direction: column; gap: 1rem; z-index: 200; }
        .cart-btn { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--white); border: none; cursor: pointer; font-size: 1.3rem; box-shadow: var(--shadow-lg); transition: var(--transition); position: relative; background: var(--primary); }
        .cart-btn:hover { background: var(--primary-dark); transform: scale(1.05); }
        .cart-count { position: absolute; top: -5px; right: -5px; background: var(--white); color: var(--primary); border-radius: 50%; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 0.75rem; border: 2px solid var(--primary); }
        
        .cart-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.6); display: none; align-items: center; justify-content: center; z-index: 3000; padding: 1rem; }
        .cart-content { width: 100%; max-width: 500px; background: var(--white); padding: 1.5rem; border-radius: var(--radius); max-height: 85vh; overflow: auto; box-shadow: var(--shadow-lg); }
        .cart-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 0.75rem; border-bottom: 1px solid var(--gray-200); }
        .cart-content h2 { color: var(--primary); margin: 0; font-family: 'Montserrat', sans-serif; }
        .close-cart { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray-600); }
        .cart-item { display: flex; justify-content: space-between; align-items: center; padding: 1rem 0; border-bottom: 1px solid var(--gray-200); }
        .cart-item-info { flex-grow: 1; }
        .cart-item-name { font-weight: 600; margin-bottom: 0.25rem; }
        .cart-item-price { color: var(--primary); font-weight: 600; }
        .remove-item { background: none; border: none; color: var(--gray-600); cursor: pointer; font-size: 1.2rem; transition: var(--transition); }
        .remove-item:hover { color: var(--primary); }
        .cart-empty { text-align: center; padding: 2rem; color: var(--gray-600); }
        .cart-empty i { font-size: 3rem; margin-bottom: 1rem; color: var(--gray-300); }
        .payment-info { margin-top: 1.5rem; padding: 1.25rem; background: var(--gray-100); border-radius: var(--radius); font-weight: 600; border-left: 4px solid var(--primary); }
        .payment-total { font-size: 1.2rem; margin-bottom: 0.75rem; }
        .payment-details { font-size: 0.9rem; color: var(--gray-800); line-height: 1.5; }
        .checkout-btn { width: 100%; background: var(--primary); color: var(--white); border: none; padding: 1rem; border-radius: var(--radius-sm); cursor: pointer; font-weight: 700; font-size: 1rem; margin-top: 1rem; transition: var(--transition); }
        .checkout-btn:hover { background: var(--primary-dark); }
    
        .payment-modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.7); display: none; align-items: center; justify-content: center; z-index: 4000; padding: 1rem; }
        .payment-content { width: 100%; max-width: 500px; max-height: 90vh; overflow: auto; background: var(--white); padding: 2rem; border-radius: var(--radius); box-shadow: var(--shadow-lg); position: relative; }
        .payment-content h2 { 
            font-family: 'Montserrat', sans-serif; 
            color: #E30613; 
            font-size: 1.4rem; 
            font-weight: 900; 
            text-transform: uppercase; 
            margin-bottom: 1.5rem; 
            text-align: center; 
            border-bottom: 4px solid #E30613; 
            padding-bottom: 12px; 
            white-space: nowrap; 
        }
        .close-payment { position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray-600); }
        .payment-form input, .payment-form textarea { width: 100%; padding: 0.75rem; margin-bottom: 1rem; border: 1px solid var(--gray-300); border-radius: var(--radius-sm); font-family: 'Open Sans', sans-serif; }
        .payment-form input:focus, 
        .payment-form textarea:focus { 
            border: 2px solid var(--primary) !important; 
            outline: none; 
            box-shadow: 0 0 10px rgba(227, 6, 19, 0.2); 
            background: #fff5f5;
        }
        .payment-methods { margin-top: 1.5rem; }
        .payment-methods h3 { font-size: 1rem; margin-bottom: 1rem; color: var(--gray-800); }
        .payment-btn { width: 100%; padding: 1rem; border: none; border-radius: var(--radius-sm); cursor: pointer; font-weight: 700; font-size: 1rem; transition: var(--transition); margin-bottom: 0.75rem; }
        .cod-btn { background: #25D366; color: white; font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4); }
        .cod-btn:hover { background: #218838; }
        .momo-instructions { background: linear-gradient(135deg, #FFCC00 0%, #FFB300 100%); color: var(--black); padding: 1.5rem; border-radius: var(--radius-sm); margin-bottom: 1rem; text-align: center; }
        .momo-instructions i { font-size: 2rem; margin-bottom: 0.5rem; display: block; }
        .momo-number { font-size: 1.5rem; font-weight: 700; margin: 0.5rem 0; background: var(--white); padding: 0.75rem; border-radius: var(--radius-sm); color: var(--primary); }
        .momo-instructions p { margin: 0.5rem 0; }
    
        #about, #contact { max-width: 800px; margin: 0 auto; }
        #about h2, #contact h2 { font-family: 'Montserrat', sans-serif; margin-bottom: 1.5rem; color: var(--primary); text-align: center; }
        #about p, #contact p { margin-bottom: 1rem; line-height: 1.7; }
        .contact-info { background: var(--gray-100); padding: 1.5rem; border-radius: var(--radius); margin-top: 1.5rem; }
        .contact-item { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1rem; }
        .contact-item i { color: var(--primary); font-size: 1.2rem; width: 24px; }
    
        footer { background: var(--gray-800); color: var(--white); text-align: center; padding: 1.5rem; margin-top: 2rem; }

        @media (min-width: 768px) { header { padding: 1rem 2rem; } header h1 { font-size: 1.6rem; } nav button { padding: 1rem; } main { padding: 2rem; } #home h2 { font-size: 2.2rem; } .products-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1.5rem; } .modal-body { grid-template-columns: 1fr 1fr; } .modal-body img { height: 100%; border-radius: var(--radius) 0 0 var(--radius); } }
        @media (min-width: 1024px) { .products-grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); } }
        
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        .pulse { animation: pulse 0.5s ease; }

     .toast-notification {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 16px 30px;
            border-radius: 50px;
            box-shadow: 0 10px 30px rgba(227, 6, 19, 0.4);
            z-index: 9999;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 12px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .toast-notification.show {
            top: 30px;
            opacity: 1;
            visibility: visible;
        }   
    </style>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NL19G8RSS9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NL19G8RSS9');
    </script>
</head>
<body>
    <header>
        <div class="logo-container" id="logoContainer">
            <div class="logo-icon">üõçÔ∏è</div>
            <h1>UBUDASA SHOP</h1>
        </div>
        <div class="header-actions">
            <a class="whatsapp-link" href="https://wa.me/250785485314" target="_blank" aria-label="Contact us on WhatsApp">
                <i class="fab fa-whatsapp"></i>
            </a>
        </div>
    </header>
    
    <nav>
        <button class="active" onclick="switchTab(event, 'home')"> <i class="fas fa-home"></i> Home </button>
        <button onclick="switchTab(event, 'products')"> <i class="fas fa-shopping-bag"></i> Products </button>
        <button onclick="switchTab(event, 'about')"> <i class="fas fa-info-circle"></i> About </button>
        <button onclick="switchTab(event, 'contact')"> <i class="fas fa-phone"></i> Contact </button>
    </nav>
    <main>
        <section id="home">
            <div class="hero-icon">üéÅ</div>
            <h2>Welcome to UBUDASA Shop</h2>
            <p>Your one-stop online shop for quality products delivered right to your doorstep across Huye.</p>
            <div class="features">
                <div class="feature"> <i class="fas fa-truck"></i> <h3>Fast Delivery</h3> <p>Quick delivery across all major cities in Huye</p> </div>
                <div class="feature"> <i class="fas fa-money-bill-wave"></i> <h3>Flexible Payment</h3> <p>Pay 10% upfront, rest on delivery</p> </div>
                <div class="feature"> <i class="fas fa-shield-alt"></i> <h3>Quality Guaranteed</h3> <p>100% authentic products</p> </div>
            </div>
            <button class="cta-button" onclick="switchTab(null, 'products')"> Shop Now <i class="fas fa-arrow-right"></i> </button>
            
        </section>
        <section id="products">
            <h2 class="section-title">Our Products</h2>
            <div class="search-container">
                <div class="search-box"> <i class="fas fa-search"></i> <input type="text" id="searchInput" placeholder="Search products..." onkeyup="searchProducts()"> </div>
            </div>
            <div class="category-filter" id="categoryContainer"></div>
            <div class="loading" id="loading"> <i class="fas fa-spinner"></i> <p>Loading products...</p> </div>
            <div class="products-grid" id="productsGrid"></div>
            <div id="noResults" class="no-results" style="display: none;"> <i class="fas fa-search"></i> <p>No products found</p> </div>
        </section>
        <section id="about">
            <h2>About UBUDASA Shop</h2>
            <p>UBUDASA Shop is your trusted online marketplace...</p>
            <ul style="margin-left: 2rem; line-height: 2;">
                <li>Wide variety of quality products</li>
                <li>Competitive prices</li>
                <li>Reliable delivery service</li>
                <li>Excellent customer support</li>
                <li>Secure payment: pay 10% upfront to MTN MoMo (603629), rest on delivery</li>
            </ul>
        </section>
        <section id="contact">
            <h2>Contact Us</h2>
            <div class="contact-info">
                <div class="contact-item"> <i class="fab fa-whatsapp"></i> <div> <strong>WhatsApp:</strong><br> <a href="https://wa.me/250785485314" style="color: var(--primary);">+250 785 485 314</a> </div> </div>
                <div class="contact-item"> <i class="fas fa-phone"></i> <div> <strong>Phone:</strong><br> +250 785 485 314 </div> </div>
                <div class="contact-item"> <i class="fas fa-envelope"></i> <div> <strong>Email:</strong><br> <a href="mailto:ubudasashop@gmail.com">ubudasashop@gmail.com</a> </div> </div>
                <div class="contact-item"> <i class="fas fa-map-marker-alt"></i> <div> <strong>Location:</strong><br> Huye, Rwanda </div> </div>
            </div>
        </section>
    </main>
    <div class="floating-buttons">
        <button class="cart-btn" onclick="toggleCart()" aria-label="Shopping cart"> <i class="fas fa-shopping-cart"></i> <span class="cart-count" id="cartCount">0</span> </button>
    </div>
    <div class="product-modal" id="productModal" onclick="closeModalIfOutside(event)">
        <div class="product-modal-content" onclick="event.stopPropagation()">
            <button class="close-modal" onclick="closeProductModal()"> <i class="fas fa-times"></i> </button>
            <div class="modal-body">
                <img id="modalImage" src="" alt="">
                <div class="modal-info">
                    <h2 id="modalTitle"></h2>
                    <div class="modal-category" id="modalCategory"></div>
                    <div class="modal-price" id="modalPrice"></div>
                    <div class="modal-description" id="modalDescription"></div>
                    <button onclick="shareCurrentProduct()" style="width: 100%; background: #25D366; color: white; border: none; padding: 1rem; border-radius: 8px; font-weight: 700; font-size: 1rem; margin-bottom: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;">
    <i class="fab fa-whatsapp"></i> Share this Product
</button>
                    <button class="modal-add-cart" id="modalAddCart"> <i class="fas fa-cart-plus"></i> Add to Cart </button>
                </div>
            </div>
        </div>
    </div>
    <div class="cart-overlay" id="cartOverlay" onclick="closeCartIfOutside(event)">
        <div class="cart-content" onclick="event.stopPropagation()">
            <div class="cart-header"> <h2><i class="fas fa-shopping-cart"></i> Your Cart</h2> <button class="close-cart" onclick="toggleCart()"> <i class="fas fa-times"></i> </button> </div>
            <div id="cartItems"></div>
        </div>
    </div>
    <div class="payment-modal" id="paymentModal">
        <div class="payment-content">
            <button class="close-payment" onclick="closePaymentModal()"> <i class="fas fa-times"></i> </button>
            <h2>Complete Your Order</h2>
            <div class="payment-form">
                <input type="text" id="customerName" placeholder="Your Name" required>
                <input type="tel" id="customerPhone" placeholder="Phone (+250...)" required>
                <input type="email" id="customerEmail" placeholder="Email (optional)">
                <textarea id="deliveryAddress" placeholder="Delivery Address" rows="2" required></textarea>
                <div class="payment-methods">
    <h3 style="font-size:1rem; margin-bottom:1rem; color:var(--gray-800);">Payment Instructions:</h3>
    
    <div style="background:#fff; border:2px solid var(--primary); border-radius:12px; padding:1.5rem; text-align:center; box-shadow: 0 4px 12px rgba(227, 6, 19, 0.1);">
        <div style="font-weight:700; color:#b06a02; margin-bottom:8px;">
            <i class="fas fa-info-circle"></i> Step 1: Pay 10% Deposit
        </div>

        <div style="background:white; border:1px solid #e9b20e; padding:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;">
            <div style="text-align:left;">
                <span style="display:block; font-size:0.7rem; font-weight:700; color:#666;">MTN MOMO CODE</span>
                <span style="font-size:1.4rem; font-weight:800; color:var(--primary);">603629</span>
            </div>
            <button onclick="copyMomoNumber()" style="background:var(--primary); color:white; border:none; padding:8px 15px; border-radius:6px; font-weight:700; cursor:pointer;">
                Copy
            </button>
        </div>

        <p style="font-size:0.85rem; color:#666; margin-top:10px;">
            Pay: <strong id="dynamicUpfrontPrice" style="color:#000;">...</strong><br>
            (Dial *182*8*1#)
        </p>
    </div>

    <button class="payment-btn cod-btn" onclick="confirmOrder()" style="margin-top:1rem; width:100%;">
        <i class="fab fa-whatsapp"></i> Confirm via WhatsApp
    </button>
</div>
            </div>
        </div>
    </div>

    
    <footer style="background: var(--white); color: #333; padding: 1.5rem 1.25rem; margin-top: 1rem; border-top: 1px solid #eee;">

        <div style="max-width: 1200px; margin: 0 auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem; text-align: left;">

    
    <div>
        <h4 style="color: var(--primary); margin-bottom: 1.2rem; font-weight: 700; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px;">
            Terms
        </h4>
        <ul style="list-style: none; padding: 0; line-height: 2;">
            <li>
                <a href="terms.html" style="color: var(--primary); text-decoration: none; font-weight: 800; font-size: 1rem;">
                    Terms & Conditions
                </a>
            </li>
        </ul>
    </div>

    
    <div>
        <h4 style="color: var(--primary); margin-bottom: 1.2rem; font-weight: 700; text-transform: uppercase; font-size: 0.9rem; letter-spacing: 1px;">
            Location
        </h4>
        <p style="margin-bottom: 0.8rem; font-size: 0.9rem;">
            <i class="fas fa-map-marker-alt" style="color: var(--primary); width: 20px;"></i>
            Huye, Southern Province
        </p>
    </div>

</div>

        <div style="background: var(--primary); color: white; margin: 3rem -2rem -4rem -2rem; padding: 1.5rem; text-align: center; font-weight: 800; letter-spacing: 1.5px; font-size: 1rem; text-transform: uppercase;">
            &copy; 2024 UBUDASA Shop. THE #1 CHOICE IN HUYE.
        </div>
    </footer>
    

    <script type="module">
        import {createClient} from 'https://esm.sh/@sanity/client'
        import imageUrlBuilder from 'https://esm.sh/@sanity/image-url'

    
        const PROJECT_ID = 'r5k0tcbx';
        const DATASET = 'production';

        const client = createClient({
            projectId: PROJECT_ID,
            dataset: DATASET,
            useCdn: false, 
            apiVersion: '2023-01-01'
        });

        const builder = imageUrlBuilder(client);
        
        
        window.sanityClient = client;
        window.urlFor = (source) => builder.image(source);


        window.dispatchEvent(new Event('sanity-ready'));
    </script>

    <script>
        let products = [];
        let cart = JSON.parse(localStorage.getItem('ubudasa_cart')) || [];
        let currentCategory = 'all';

        
        window.addEventListener('sanity-ready', async () => {
            console.log("Sanity Connected. Fetching products...");
            const lastTab = localStorage.getItem('activeTab');
            if (lastTab) {
                switchTab(null, lastTab);
            }
            await loadProductsFromSanity(); 
            updateCart();
            setTimeout(() => {
                const urlParams = new URLSearchParams(window.location.search);
                const productId = urlParams.get('product');
                
                if (productId) {
                    const product = products.find(p => p.id === productId);
                    if (product) {
                        showProductDetail(productId);
                    }
                }
            }, 500);
        });

        async function loadProductsFromSanity() {
            const loading = document.getElementById('loading');
            const grid = document.getElementById('productsGrid');
            const noResults = document.getElementById('noResults');
            
            try {
                loading.style.display = 'block';
                grid.style.display = 'none';
                if(noResults) noResults.style.display = 'none';
                
                
                const query = `*[_type == "product"]{
                    _id,
                    name,
                    price,
                    image,
                    details,
                    category
                }`;

                const sanityData = await window.sanityClient.fetch(query);
                
                
                products = sanityData.map(item => {
                    let descText = "No description";
            
                    if (item.details && Array.isArray(item.details) && item.details[0] && item.details[0].children) {
                        descText = item.details[0].children[0].text;
                    } else if (typeof item.details === 'string') {
                        descText = item.details;
                    }

                    let imageUrl = "https://via.placeholder.com/400x400?text=No+Image";
                    if (item.image) {
                        imageUrl = window.urlFor(item.image).width(400).url();
                    }

            
                    let cat = item.category ? item.category : "General";

                    return {
                        id: item._id,
                        name: item.name,
                        price: item.price,
                        category: cat,
                        description: descText,
                        img: imageUrl
                    };
                });
         

                const activeCategories = ['All', ...new Set(products.map(p => p.category))];
                
                const catContainer = document.getElementById('categoryContainer');
                catContainer.innerHTML = activeCategories.map(cat => {
            
                    let icon = 'fas fa-tag'; 
                    const c = cat.toLowerCase();
                    if(c === 'all') icon = 'fas fa-th';
                    else if(c.includes('electr')) icon = 'fas fa-laptop';
                    else if(c.includes('fash')) icon = 'fas fa-tshirt';
                    else if(c.includes('beaut')) icon = 'fas fa-spray-can';
                    else if(c.includes('sport')) icon = 'fas fa-dumbbell';

                    const isActive = cat === 'All' ? 'active' : '';
                    const clickArg = cat === 'All' ? 'all' : cat;
                    
                    return `<button class="category-btn ${isActive}" onclick="filterByCategory('${clickArg}', this)"> 
                                <i class="${icon}"></i> ${cat} 
                            </button>`;
                }).join('');       
                
                loading.style.display = 'none';
                grid.style.display = 'grid';
                renderProducts();

            } catch (error) {
                console.error('Error loading products:', error);
                loading.innerHTML = `
                    <div style="color:red; text-align:center;">
                        <i class="fas fa-exclamation-triangle" style="font-size:2rem; margin-bottom:10px;"></i>
                        <p>Could not load products.</p>
                        <small>${error.message}</small>
                    </div>  
                `;
            }
        }

    

       function switchTab(event, tabName) {
            
            localStorage.setItem('activeTab', tabName); 

            document.querySelectorAll('main > section').forEach(section => {
                section.style.display = 'none';
            });
            
            document.getElementById(tabName).style.display = 'block';
            
            document.querySelectorAll('nav button').forEach(btn => {
                btn.classList.remove('active');
            });
            
            if (event) {
                event.currentTarget.classList.add('active');
            } else {
                document.querySelectorAll('nav button').forEach(btn => {
                    if (btn.textContent.toLowerCase().includes(tabName)) {
                        btn.classList.add('active');
                    }
                });
            }
        }

        function formatPrice(price) {
            return price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }

        function filterByCategory(category, btn) {
            currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
            if(btn) btn.classList.add('active');
        
            else {
                 const allBtn = document.querySelector('.category-filter button');
                 if(allBtn) allBtn.classList.add('active');
            }
            renderProducts();
        }

        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            renderProducts(searchTerm);
        }

        function renderProducts(searchTerm = '') {
            const grid = document.getElementById('productsGrid');
            const noResults = document.getElementById('noResults');
            
            let filteredProducts = products;
            
        
            if (currentCategory !== 'all') {
        
                 filteredProducts = filteredProducts.filter(p => p.category.toLowerCase() === currentCategory.toLowerCase());
            }

            if (searchTerm) {
                filteredProducts = filteredProducts.filter(p => 
                    p.name.toLowerCase().includes(searchTerm) || 
                    p.description.toLowerCase().includes(searchTerm)
                );
            }
            
            if (filteredProducts.length === 0) {
                grid.innerHTML = '';
                if(noResults) noResults.style.display = 'block';
            } else {
                if(noResults) noResults.style.display = 'none';
                grid.innerHTML = filteredProducts.map(product => `
                    <div class="product" onclick="showProductDetail('${product.id}')">
                        <div class="product-img-container">
                            <img src="${product.img}" alt="${product.name}" loading="lazy">
                            <span class="product-category">${product.category}</span>
                        </div>
                        <div class="product-info">
                        <h3>${product.name}</h3> <div class="product-price" style="display: flex; align-items: center; justify-content: space-between;">
                            <span>${formatPrice(product.price)} RWF</span>
                            
                            <span title="Fast delivery in Huye" style="font-size: 0.75rem; color: #155724; background: #d4edda; padding: 4px 8px; border-radius: 4px; font-weight: 700;">
                               <i class="fas fa-truck"></i> Free Delivery: Huye
                           </span>
                        </div>

                        <button onclick="event.stopPropagation(); addToCart('${product.id}')">
                                <i class="fas fa-cart-plus"></i> Add to Cart
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            document.getElementById('modalImage').src = product.img;
            document.getElementById('modalTitle').textContent = product.name;
            document.getElementById('modalCategory').textContent = product.category;
            document.getElementById('modalPrice').textContent = formatPrice(product.price) + ' RWF';
            document.getElementById('modalDescription').textContent = product.description;
            
            const addCartBtn = document.getElementById('modalAddCart');
            
            
            addCartBtn.dataset.productId = productId; 

            addCartBtn.onclick = () => {
                addToCart(productId);
                closeProductModal();
            };
            
            document.getElementById('productModal').style.display = 'flex';

            
            const newUrl = window.location.pathname + '?product=' + productId;
            window.history.pushState({ path: newUrl }, '', newUrl);
        }

        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
            
            window.history.pushState({ path: window.location.pathname }, '', window.location.pathname);
        }

        function closeModalIfOutside(event) {
            if (event.target.id === 'productModal') {
                closeProductModal();
            }
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }
                updateCart();
                
                const cartBtn = document.querySelector('.cart-btn');
                if(cartBtn) {
                    cartBtn.classList.add('pulse');
                    setTimeout(() => cartBtn.classList.remove('pulse'), 500);
                }
            }
        }

        function removeFromCart(productId) {
            const pId = String(productId);
            cart = cart.filter(item => String(item.id) !== pId);
            updateCart();
        }

        function updateCart() {
            localStorage.setItem('ubudasa_cart', JSON.stringify(cart));
            const cartCount = document.getElementById('cartCount');
            const cartItems = document.getElementById('cartItems');
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            cartCount.style.display = totalItems > 0 ? 'flex' : 'none';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="cart-empty">
                        <i class="fas fa-shopping-cart"></i>
                        <p>Your cart is empty</p>
                    </div>
                `;
            } else {
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const upfront = Math.round(total * 0.1);
                const remaining = total - upfront;
                
                cartItems.innerHTML = `
                    ${cart.map(item => `
                        <div class="cart-item">
                            <div class="cart-item-info">
                                <div class="cart-item-name">${item.name} x${item.quantity}</div>
                                <div class="cart-item-price">${formatPrice(item.price * item.quantity)} RWF</div>
                            </div>
                            <button class="remove-item" onclick="removeFromCart('${item.id}')">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    `).join('')}
                    <div class="payment-info">
                        <div class="payment-total">Total: ${formatPrice(total)} RWF</div>
                        <div class="payment-details">
                            <strong>Payment Method:</strong><br>
                            Pay ${formatPrice(upfront)} RWF (10%) to MTN MoMo: 603629<br>
                            Pay ${formatPrice(remaining)} RWF (90%) on delivery
                        </div>
                    </div>
                    <button class="checkout-btn" onclick="openPaymentModal()">
                        <i class="fas fa-check-circle"></i> Proceed to Checkout
                    </button>
                `;
            }
        }

        function toggleCart() {
            const overlay = document.getElementById('cartOverlay');
            if (overlay.style.display === 'flex') {
                overlay.style.display = 'none';
            } else {
                overlay.style.display = 'flex';
            }
        }

        function closeCartIfOutside(event) {
            if (event.target.id === 'cartOverlay') {
                toggleCart();
            }
        }

        function openPaymentModal() {
            if (cart.length === 0) return;
            toggleCart();
            document.getElementById('paymentModal').style.display = 'flex';
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').style.display = 'none';
        }

        function confirmOrder() {
            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const address = document.getElementById('deliveryAddress').value.trim();
            
            if (!name || !phone || !address) {
                alert('Please fill in all required fields');
                return;
            }
            
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const upfront = Math.round(total * 0.1);
            const remaining = total - upfront;
            
            sendOrderToWhatsApp(name, phone, address, upfront, remaining);
            cart = [];
            localStorage.removeItem('ubudasa_cart');
            updateCart();
            closePaymentModal();
            alert(`Order confirmed!\n\nPay ${formatPrice(upfront)} RWF to 603629 (MTN MoMo)\nRemaining ${formatPrice(remaining)} RWF on delivery.`);
        }

        function sendOrderToWhatsApp(name, phone, address, upfront, remaining) {
            const total = upfront + remaining;
            
            const orderDetails = cart.map(item => 
                `${item.name} x${item.quantity} - ${formatPrice(item.price * item.quantity)} RWF`
            ).join('%0A');
            
            const message = `üõçÔ∏è *New Order - UBUDASA Shop*%0A%0A` +
            `*Customer:* ${name}%0A` +
            `*Phone:* ${phone}%0A` +
            `*Address:* ${address}%0A%0A` +
            `*Order Details:*%0A${orderDetails}%0A%0A` +
            `*Total Amount:* ${formatPrice(total)} RWF%0A%0A` +
            `*Payment Breakdown:*%0A` +
            `‚úÖ 10% Upfront (MTN MoMo 603629): ${formatPrice(upfront)} RWF%0A` +
            `üì¶ 90% On Delivery: ${formatPrice(remaining)} RWF`;
            
            window.open(`https://wa.me/250785485314?text=${message}`, '_blank');
        }


    function copyMomoNumber() {
        navigator.clipboard.writeText("603629");
        
        const toast = document.getElementById("toast");
        toast.classList.add("show");
        
        setTimeout(() => {
            toast.classList.remove("show");
        }, 3000);
    }

    function updateMomoPriceDisplay() {
        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const upfront = Math.round(total * 0.1);
        const display = document.getElementById('dynamicUpfrontPrice');
        if(display) display.textContent = formatPrice(upfront) + " RWF";
    }

    const originalOpenModal = openPaymentModal;
    openPaymentModal = function() {
        originalOpenModal(); 
        updateMomoPriceDisplay(); 
    };

    function shareCurrentProduct() {
        const title = document.getElementById('modalTitle').textContent;
        const price = document.getElementById('modalPrice').textContent;
        

        const addToCartBtn = document.getElementById('modalAddCart');
        const productId = addToCartBtn.dataset.productId;
        
        if (!productId) {
            alert("Error: Could not find product link.");
            return;
        }
        
        const shareLink = window.location.origin + window.location.pathname + "?product=" + productId;

        const message = `üõçÔ∏è *${title}*` + 
                        `\nüí∞ ${price}` +
                        `\n\nOrder it on UBUDASA Shop: üëá` + 
                        `\n${shareLink}`;

        window.open(`https://wa.me/?text=${encodeURIComponent(message)}`, '_blank');
    }
    </script>
    <div id="toast" class="toast-notification">
        <i class="fas fa-check-circle" style="font-size: 1.2rem;"></i> 
        <span>Code Copied Successfully!</span>
    </div>
</body>
</html>